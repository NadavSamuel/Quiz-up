(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{168:function(e,t,n){e.exports=n(339)},173:function(e,t,n){},174:function(e,t,n){},227:function(e,t){},339:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(7),c=n.n(o),i=(n(173),n(174),n(9)),s=n(14),l=n(15),u=n(18),m=n(17),p=n(21),d=n(73),h=n.n(d),f=h.a.create({withCredentials:!0}),y=function(e){return e.data},v={query:function(e){var t="";e&&(t="?"+Object.keys(e).map((function(t){return t+"="+e[t]})).join("&"));return console.log("query is",t),f.get("".concat("/api/toy").concat(t)).then(y)},getById:function(e){return f.get("".concat("/api/toy","/").concat(e)).then(y)},remove:function(e){return f.delete("".concat("/api/toy","/").concat(e))},save:function(e){if(e._id)return f.put("".concat("/api/toy","/").concat(e._id),e);var t={price:56,name:e,type:"Funny",inStock:!0};return f.post("/api/toy",t).then(y)}};function g(e){return function(t){v.query(e).then((function(e){t({type:"SET_TOYS",toys:e})}))}}function b(e){return function(t){v.remove(e._id).then((function(){t({type:"REMOVE_TOY",toy:e})}))}}var E=n(31);var O=Object(p.b)((function(e){return{toys:e.toyReducer.toys,loggedInUser:e.userReducer.loggedinUser}}))((function(e){var t=e.toy,n=e.loggedInUser;return r.a.createElement("div",{className:"toy-preview"},r.a.createElement("h3",null,t.name),r.a.createElement("h4",null,t.price,"$"),r.a.createElement("h5",null,"Category: ",t.type),t.inStock&&"This toy is on stock!",!t.inStock&&"Out of stock",r.a.createElement("div",null,r.a.createElement(E.b,{to:"/toy/".concat(t._id)},"Check It Out!")),n&&n.isAdmin&&r.a.createElement("div",null,r.a.createElement(E.b,{to:"/toy/edit/".concat(t._id)},"Edit")),r.a.createElement("img",{src:t.imgUrl,alt:""}))}));function w(e){var t=e.toys;return r.a.createElement("div",{className:"card-grid"},t.map((function(e){return r.a.createElement(O,{toy:e,key:e._id})})))}var j=n(26),k=n(6),S=n(374),T=n(340),C=n(377),A=n(379),I=n(376),x=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={filter:{filterText:"",inStock:"all",sortBy:"price"}},e.handleChange=function(t){var n=t.target;console.log(n.value,"@TARGET");var a=n.name,r=n.value;e.setState((function(e){return{filter:Object(k.a)(Object(k.a)({},e.filter),{},Object(j.a)({},a,r))}}),(function(){e.props.onSetFilter(e.state.filter),console.log(e.state)}))},e.submitForm=function(t){t.preventDefault(),e.props.onSetFilter(e.state.filter)},e.setSort=function(t){e.setState({filter:Object(k.a)(Object(k.a)({},e.state.filter),{},{sortBy:t})},(function(){return e.props.onSetFilter(e.state.filter)}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"toy-filter"},r.a.createElement("form",{onSubmit:this.submitForm},r.a.createElement(C.a,{className:"search-input",onChange:this.handleChange,type:"text",name:"filterText",placeholder:"Search toy...",id:"outlined-basic",label:"SEARCH",variant:"outlined"}),r.a.createElement(I.a,{name:"inStock",value:this.state.filter.inStock,labelId:"demo-simple-select-label",id:"demo-simple-select",onChange:this.handleChange},r.a.createElement(A.a,{value:"all"},"All"),r.a.createElement(A.a,{value:"yes"},"In stock"),r.a.createElement(A.a,{value:"no"},"Out of stock"))),r.a.createElement(S.a,{color:"primary",variant:"contained","aria-label":"contained primary button group"},r.a.createElement(T.a,{onClick:function(){return e.setSort("price")}},"Sort By Price"),r.a.createElement(T.a,{className:"special-btn",onClick:function(){return e.setSort("name")}},"Sort By Name")))}}]),n}(a.Component),_=n(375),R=n(154),D=n.n(R),U=n(104),N=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t){var n=t.target.value;e.setState({toyName:n})},e.submitForm=function(t){t.preventDefault(),console.log("adding:",e.state),e.props.onAddToy(e.state.toyName)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("section",null,r.a.createElement(U.b,{initialValues:{text:""},onSubmit:function(e,t){var n=t.setSubmitting;setTimeout((function(){alert(JSON.stringify(e,null,2)),n(!1)}),400)}},(function(t){var n=t.isSubmitting;return r.a.createElement(U.a,null,r.a.createElement(C.a,{name:"text",onChange:e.handleChange,type:"text",placeholder:"Add Toy...",id:"outlined-basic",label:"New Toy",variant:"outlined"}),r.a.createElement(_.a,{color:"primary","aria-label":"add"},r.a.createElement(D.a,{onClick:e.submitForm,type:"submit",disabled:n})))})))}}]),n}(a.Component),F=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={filterBy:null},e.onSetFilter=function(t){e.setState({filterBy:t},(function(){return e.props.loadToys(e.state.filterBy)}))},e.onAddToy=function(t){e.props.addToy(t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.loadToys()}},{key:"render",value:function(){var e=this.props,t=e.toys,n=e.loggedInUser;return t?r.a.createElement("div",{className:"toy-app"},r.a.createElement("h1",null,"Toy App"),n&&n.isAdmin&&r.a.createElement(N,{onAddToy:this.onAddToy}),r.a.createElement(x,{onSetFilter:this.onSetFilter,onSortName:this.onSortName,onSortPrice:this.onSortPrice}),r.a.createElement(w,{toys:t})):r.a.createElement("div",null,"Loading...")}}]),n}(a.Component),M={loadToys:g,addToy:function(e){return console.log("im here:",e),function(t){v.save(e).then((function(e){t({type:"ADD_TOY",newToy:e})}))}}},B=Object(p.b)((function(e){return{toys:e.toyReducer.toys,loggedInUser:e.userReducer.loggedinUser}}),M)(F),P=n(10),L=n.n(P),W=n(20),V=h.a.create({withCredentials:!0}),Y=function(e,t){return G(e,"GET",t)},q=function(e,t){return G(e,"POST",t)},H=function(e,t){return G(e,"DELETE",t)};function G(e){return z.apply(this,arguments)}function z(){return(z=Object(W.a)(L.a.mark((function e(t){var n,a,r,o=arguments;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"get",a=o.length>2&&void 0!==o[2]?o[2]:null,e.prev=2,e.next=5,V({url:"".concat("/api/").concat(t),method:n,data:a});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(n,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(a)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var J={add:function(e){return X.apply(this,arguments)},query:function(e){if(e)var t="?toyId=".concat(e.toyId);return Y("review".concat(t||""))},remove:function(e){return H("review/".concat(e))}};function X(){return(X=Object(W.a)(L.a.mark((function e(t){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("review",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $,K=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={reviewToEdit:{txt:"",toyId:""}},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState((function(e){return{reviewToEdit:Object(k.a)(Object(k.a)({},e.reviewToEdit),{},Object(j.a)({},a,r))}}))},e.addReview=function(t){t.preventDefault(),e.props.addReview(e.state.reviewToEdit),e.setState({reviewToEdit:{txt:"",toyId:""}})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(W.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadReviews(this.props.toyId);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"review-container"},this.props.reviews&&r.a.createElement("ul",null,this.props.reviews.map((function(e){return r.a.createElement("div",{key:e._id,className:"review-single"},r.a.createElement("h3",{key:e._id},e.txt),r.a.createElement("p",null,"By ",e.byUser.username),r.a.createElement("hr",null))}))),this.props.loggedInUser&&r.a.createElement("h2",null,"Add Review:"),this.props.loggedInUser&&r.a.createElement("form",{onSubmit:this.addReview},r.a.createElement("select",{onChange:this.handleChange,value:this.state.reviewToEdit.toyId,name:"toyId"},r.a.createElement("option",{value:""},"Select Toy"),this.props.toys.map((function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.name)}))),r.a.createElement("textarea",{name:"txt",onChange:this.handleChange,value:this.state.reviewToEdit.txt}),r.a.createElement("button",null,"Submit")))}}]),n}(a.Component),Z={addReview:function(e){return function(){var t=Object(W.a)(L.a.mark((function t(n){var a;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J.add(e);case 3:a=t.sent,n({type:"REVIEW_ADD",review:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("ReviewActions: err in addReview",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},loadReviews:function(e){return function(){var t=Object(W.a)(L.a.mark((function t(n){var a;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J.query({toyId:e});case 3:a=t.sent,n({type:"SET_REVIEWS",reviews:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("ReviewActions: err in loadReviews",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},Q=Object(p.b)((function(e){return{toys:e.toyReducer.toys,loggedInUser:e.userReducer.loggedinUser,reviews:e.reviewReducer.reviews}}),Z)(K),ee=n(52),te=n(155),ne=n.n(te),ae={setup:function(){$=ne()("/")},terminate:function(){$=null},on:function(e,t){$.on(e,t)},off:function(e,t){$.off(e,t)},emit:function(e,t){$.emit(e,t)}};var re=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={msg:{from:"Guest",txt:""},msgs:[],topic:e.props.toy._id,userTyping:""},e.setUserTyping=function(t){e.setState({userTyping:t})},e.getHistory=function(t){e.setState({msgs:t})},e.socketAddMsg=function(t){e.setState((function(e){return{msgs:[].concat(Object(ee.a)(e.msgs),[t])}}),console.log(e.state.msgs))},e.msgHandleChange=function(t){ae.emit("is typing",e.state.msg.from);var n=t.target,a=n.name,r=n.value;r||ae.emit("is typing",""),e.setState((function(e){return{msg:Object(k.a)(Object(k.a)({},e.msg),{},Object(j.a)({},a,r))}}))},e.sendMsg=function(t){t.preventDefault(),ae.emit("chat newMsg",e.state.msg),e.setState({msg:Object(k.a)(Object(k.a)({},e.state.msg),{},{txt:""}),isTyping:!1})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.loggedInUser;e&&this.setState({msg:Object(k.a)(Object(k.a)({},this.state.msg),{},{from:e.username})}),ae.setup(),ae.emit("chat topic",this.state.topic),ae.on("chat addMsg",this.socketAddMsg),ae.on("getMsgs",this.getHistory),ae.on("user typing",this.setUserTyping)}},{key:"componentWillUnmount",value:function(){ae.off("chat addMsg"),ae.terminate()}},{key:"render",value:function(){var e=this.state.userTyping;return r.a.createElement("div",{className:"chat-box"},r.a.createElement("h3",null,"Lets Talk About ",this.props.toy.name),e&&r.a.createElement("div",null," ",e," is typing..."),r.a.createElement("div",{className:"main-chat"},this.state.msgs.length?r.a.createElement("ul",{className:"chat-container"},this.state.msgs.map((function(e,t){return r.a.createElement("li",{key:t},e.from,": ",e.txt)}))):"",r.a.createElement("form",{onSubmit:this.sendMsg},r.a.createElement("input",{autoComplete:"off",autoFocus:!0,type:"text",value:this.state.msg.txt,className:"chat-input",onChange:this.msgHandleChange,name:"txt"}),r.a.createElement("button",null,"Send"))))}}]),n}(a.Component),oe=Object(p.b)((function(e){return{toys:e.toyReducer.toys,loggedInUser:e.userReducer.loggedinUser}}))(re),ce=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={toy:null},e.onDeleteToy=function(){e.props.removeToy(e.state.toy),setTimeout((function(){return e.props.history.push("/toy")}),500)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(W.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.getById(this.props.match.params.id);case 2:t=e.sent,this.setState({toy:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.toy,t=this.props.loggedInUser;return e?r.a.createElement("div",{className:"details-container"},r.a.createElement("h3",null,e.name),r.a.createElement("h4",null,e.price,"$"),r.a.createElement("h5",null,"Category: ",e.type),e.inStock?"This toy is on stock!":"Out of stock",r.a.createElement("h5",null,"Created At ",e.createdAt),e.imgUrl&&r.a.createElement("img",{src:e.imgUrl,alt:"No Img"}),t&&t.isAdmin&&r.a.createElement("button",{onClick:this.onDeleteToy},"Delete Toy"),r.a.createElement(oe,{toy:e}),r.a.createElement(Q,{toyId:e._id})):r.a.createElement("span",null,"Loading...")}}]),n}(a.Component),ie={removeToy:b},se=Object(p.b)((function(e){return{toys:e.toyReducer.toys,loggedInUser:e.userReducer.loggedinUser}}),ie)(ce);function le(){return r.a.createElement("div",{className:"nav-container"},r.a.createElement(E.b,{className:"navlink",to:"/"}," Toy App")," ",r.a.createElement("br",null),r.a.createElement(E.b,{className:"navlink",to:"/about"}," About"),r.a.createElement("br",null),r.a.createElement(E.b,{className:"navlink",to:"/login"}," Login"),r.a.createElement(E.b,{className:"navlink",to:"/dashboard"}," Dashboard"))}var ue=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={toy:null},e.uploadImg=function(){var t=Object(W.a)(L.a.mark((function t(n){var a,r,o,c;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"dsrtl41yz",a="https://api.cloudinary.com/v1_1/".concat("dsrtl41yz","/image/upload"),(r=new FormData).append("file",n.target.files[0]),r.append("upload_preset","ml_default"),t.prev=5,t.next=8,fetch(a,{method:"POST",body:r});case 8:return o=t.sent,t.next=11,o.json();case 11:return c=t.sent,e.setState({toy:Object(k.a)(Object(k.a)({},e.state.toy),{},{imgUrl:c.secure_url})},(function(){return console.log(e.state)})),t.abrupt("return",c);case 16:t.prev=16,t.t0=t.catch(5),console.log("Got Error uploading the img:",t.t0);case 19:case"end":return t.stop()}}),t,null,[[5,16]])})));return function(e){return t.apply(this,arguments)}}(),e.handleInput=function(t){var n=t.target,a=n.name,r="number"===n.type?+n.value:n.value;e.setState((function(e){return{toy:Object(k.a)(Object(k.a)({},e.toy),{},Object(j.a)({},a,r))}}),(function(){return console.log(e.state,"@@@***")}))},e.onSaveToy=function(t){t.preventDefault(),e.props.saveToy(e.state.toy),setTimeout((function(){return e.props.history.push("/toy")}),400)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;v.getById(this.props.match.params.id).then((function(t){e.setState({toy:t})}))}},{key:"render",value:function(){var e=this.state.toy;return e?r.a.createElement("div",{className:"edit-container"},r.a.createElement("h3",null,"Want to edit your toy info? This is the right place!"),r.a.createElement("form",{onSubmit:this.onSaveToy},r.a.createElement("input",{onChange:this.handleInput,type:"text",name:"name",defaultValue:e.name}),r.a.createElement("input",{onChange:this.handleInput,type:"text",name:"type",defaultValue:e.type}),r.a.createElement("input",{onChange:this.handleInput,type:"number",name:"price",defaultValue:e.price}),e.imgUrl&&r.a.createElement("img",{src:e.imgUrl,alt:"No Img"}),r.a.createElement("input",{type:"file",onChange:this.uploadImg}),r.a.createElement("button",null,"SAVE"))):r.a.createElement("div",null,"Loading...")}}]),n}(a.Component),me={removeToy:b,saveToy:function(e){return function(t){v.save(e).then((function(){t({type:"UPDATE_TOY",toyToSave:e})}))}}},pe=Object(p.b)((function(e){return{toys:e.toyReducer.toys}}),me)(ue),de=n(103),he=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getObjectMap=function(){return e.props.toys.reduce((function(e,t){return e[t.type]||(e[t.type]=0),e[t.type]+=t.price,e}),{})},e.getCounterMap=function(){return e.props.toys.reduce((function(e,t){return e[t.type]||(e[t.type]=0),e[t.type]++,e}),{})},e.getBarData=function(){var t=Object.keys(e.getObjectMap()),n=Object.values(e.getObjectMap()),a=Object.values(e.getCounterMap());return{labels:t,datasets:[{label:"Average price",backgroundColor:"rgba(255,99,132,0.2)",borderColor:"rgba(255,99,132,1)",borderWidth:2,hoverBackgroundColor:"rgba(255,99,132,0.4)",hoverBorderColor:"#ff6384",data:n.map((function(e,t){return+(e/a[t]).toFixed(0)}))}]}},e.getPieData=function(){var t=e.props.toys.reduce((function(e,t){var n=t.createdAt.substring(0,4);return e[n]||(e[+n]=0),e[n]++,e}),{});return{labels:Object.keys(t),datasets:[{data:Object.values(t),backgroundColor:["#FF6384","#36A2EB","#FFCE56","#FFEE11","#40434E","#52154E","#C17817","#3F784C","#B20D30","#F0E2E7","#3F84E5","#af73e1"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56","#FFEE11","#40434E","#52154E","#C17817","#3F784C","#B20D30","#F0E2E7","#3F84E5","#af73e1"]}]}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.loadToys()}},{key:"render",value:function(){return this.props.toys.length?r.a.createElement("section",{className:"dashboard-container"},r.a.createElement("h1",null,"Dashboard"),r.a.createElement("h2",null,"Average price per Toy category/type"),r.a.createElement(de.Bar,{data:this.getBarData(),width:5,height:1,options:{maintainAspectRatio:!0,scales:{yAxes:[{ticks:{beginAtZero:!0,min:0}}]}}}),r.a.createElement("h2",null,"Toys per year"),r.a.createElement(de.Pie,{width:3,height:1,data:this.getPieData()})):r.a.createElement("div",null,"Loading")}}]),n}(a.Component),fe={loadToys:g},ye=Object(p.b)((function(e){return{toys:e.toyReducer.toys}}),fe)(he),ve=n(48),ge=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={lat:32.0853,lng:34.7818},e.onMarkerClick=function(e){console.log(e)},e.onInfoWindowClose=function(e){console.log(e)},e.onMapClicked=function(t,n,a){e.setState({lat:a.latLng.lat(),lng:a.latLng.lng()})},e.changePos=function(t){var n={lat:"",lng:""};switch(t){case"haifa":n.lat=32.794044,n.lng=34.989571;break;case"bat-yam":n.lat=32.017136,n.lng=34.745441;break;case"eilat":n.lat=29.55805,n.lng=34.94821;break;default:n.lat=32.017136,n.lng=34.745441}e.setState(n)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("section",null,r.a.createElement("h1",null,"About Page"),r.a.createElement(S.a,{color:"primary",variant:"contained","aria-label":"contained primary button group"},r.a.createElement(T.a,{onClick:function(){return e.changePos("haifa")}},"Haifa"),r.a.createElement(T.a,{onClick:function(){return e.changePos("batyam")}},"Bat-Yam"),r.a.createElement(T.a,{onClick:function(){return e.changePos("eilat")}},"Eilat")),r.a.createElement(ve.Map,{initialCenter:this.state,center:this.state,google:this.props.google,zoom:10,onClick:this.onMapClicked},r.a.createElement(ve.Marker,{onClick:this.onMarkerClick,name:"Current location"}),r.a.createElement(ve.Marker,{position:{lat:32.2953,lng:34.8822}}),r.a.createElement(ve.Marker,{position:{lat:32.3803,lng:35.0822}}),r.a.createElement(ve.InfoWindow,{onClose:this.onInfoWindowClose},r.a.createElement("div",null,r.a.createElement("h1",null,"InfoWindow")))))}}]),n}(a.Component),be=Object(ve.GoogleApiWrapper)({apiKey:"AIzaSyDV3aMtXNZ4Q87UKlasdj0gHhEP2xEEqFY"})(ge),Ee={login:function(e){return Oe.apply(this,arguments)}};function Oe(){return(Oe=Object(W.a)(L.a.mark((function e(t){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("auth/login",t);case 2:return n=e.sent,e.abrupt("return",we(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e){return sessionStorage.setItem("user",JSON.stringify(e)),e}var je=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:""},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(j.a)({},a,r))},e.onLogin=function(){var t=Object(W.a)(L.a.mark((function t(n){return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.username&&e.state.password){t.next=2;break}return t.abrupt("return",alert("Please enter user/password"));case 2:e.props.onLogin(e.state);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.loggedInUser;return console.log("logged in:",e),r.a.createElement("div",null,r.a.createElement("h1",null,"Login page"),!e&&r.a.createElement("form",{className:"login-form",onSubmit:this.onLogin},r.a.createElement(C.a,{autoFocus:!0,required:!0,onChange:this.handleChange,name:"username",id:"outlined-basic",label:"Username",variant:"outlined"}),r.a.createElement(C.a,{required:!0,onChange:this.handleChange,name:"password",id:"outlined-basic",label:"Password",variant:"outlined"}),r.a.createElement(T.a,{variant:"contained",color:"primary",onClick:this.onLogin},"Submit")),e&&r.a.createElement("h2",null,"Welcome,",e.username))}}]),n}(a.Component),ke={onLogin:function(e){return function(){var t=Object(W.a)(L.a.mark((function t(n){var a;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ee.login(e);case 2:a=t.sent,n({type:"SET_USER",user:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},Se=Object(p.b)((function(e){return{toys:e.toyReducer.toys,loggedInUser:e.userReducer.loggedinUser}}),ke)(je),Te=n(156),Ce=n.n(Te),Ae=n(157),Ie=n.n(Ae);function xe(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("a",{href:"https://www.facebook.com/tal.lahyani"},r.a.createElement(Ce.a,{className:"facebook-icon"})),"Copyrights \u24b8 Tal Lahyani",r.a.createElement("a",{href:"https://www.linkedin.com/in/tal-lahyani-0b84251a5/"},r.a.createElement(Ie.a,{className:"linkedin-icon"})))}var _e=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(le,null),r.a.createElement(i.c,null,r.a.createElement(i.a,{component:pe,path:"/toy/edit/:id"}),r.a.createElement(i.a,{component:se,path:"/toy/:id"}),r.a.createElement(i.a,{component:ye,path:"/dashboard"}),r.a.createElement(i.a,{component:be,path:"/about"}),r.a.createElement(i.a,{component:Se,path:"/login"}),r.a.createElement(i.a,{component:B,path:"/"})),r.a.createElement(xe,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Re=n(47),De=n(158),Ue={toys:[]};var Ne={users:[],loggedinUser:null};var Fe={reviews:[],selectedReview:null};var Me=Object(Re.c)({toyReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOYS":return Object(k.a)(Object(k.a)({},e),{},{toys:t.toys});case"REMOVE_TOY":return Object(k.a)(Object(k.a)({},e),{},{toys:e.toys.filter((function(e){return e._id!==t.toy._id}))});case"ADD_TOY":return Object(k.a)(Object(k.a)({},e),{},{toys:[t.newToy].concat(Object(ee.a)(e.toys))});case"UPDATE_TOY":case"UPDATE_TODO":return Object(k.a)(Object(k.a)({},e),{},{toys:e.toys.map((function(e){return e._id===t.toyToSave._id?t.toyToSave:e}))});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":case"SET_USERS:":return Object(k.a)(Object(k.a)({},e),{},{loggedinUser:t.user});default:return e}},reviewReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_REVIEWS":return Object(k.a)(Object(k.a)({},e),{},{reviews:t.reviews});case"REVIEW_ADD":return Object(k.a)(Object(k.a)({},e),{},{reviews:[].concat(Object(ee.a)(e.reviews),[t.review])});case"REVIEW_UPDATE":return Object(k.a)(Object(k.a)({},e),{},{reviews:e.reviews.map((function(e){return e._id===t.review._id?t.review:e}))});default:return e}}}),Be=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Re.d,Pe=Object(Re.e)(Me,Be(Object(Re.a)(De.a)));c.a.render(r.a.createElement(p.a,{store:Pe},r.a.createElement(E.a,null,r.a.createElement(_e,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[168,1,2]]]);
//# sourceMappingURL=main.2bca65ba.chunk.js.map